var fs = require('fs');
var file = require('./file');
var UglifyJS = require('uglify-js');
var path = require('path');

module.exports = uglify

function uglify(_path,cb){

    var files = file.currentFile(_path)

    for (var i = 0; i < files.length; i++) {

        var _fileurl = _path + files[i],
            _extname = path.extname(_fileurl),
            _filename = path.basename(_fileurl, '.js');

        if(_extname === '.js'){
            
            if(!file.exists(_fileurl)) return cb&&cb("no such file or directory '" + _fileurl +"'");

            var result = UglifyJS.minify(_fileurl);
            
            cb&&cb(result,_filename,_extname);
        }

    };

}